<ons-page>
  <script>
    var tempList = "";
    var Chinese = "";
    var Spring = "";
    var Vegan = "";
    var Mother = "";
    var Easter = "";
    var SlowCook = "";
    var RecipeList = firebase.database().ref('RecipeList');
      RecipeList.on('value', function(snapshot) {
        Chinese = snapshot.val().chinese;
        Easter = snapshot.val().easter;
        Spring = snapshot.val().spring;
        Soup = snapshot.val().soup;
        Vegan = snapshot.val().vegan;
        SlowCook = snapshot.val().slowcook;
        Mother = snapshot.val().mothers;
        console.log(Chinese[0].Img);
        // console.log(Mother[0]);
        (()=>{
        var list = document.getElementById('recipelist');
        list.delegate = {
          createItemContent: function (index) {
            // Return a DOM element here.
            // return ons.createElement( '<ons-list-item id="listitem'+index+'">Item'+index+'</ons-list-item>');
            // console.log(Chinese[index].Img);
            var listitem = '<ons-list-item id="recipe'+index+'"onclick="showDetail(\'detail.html\')">'+
              '<div class="left"> '+
              '<img class="list-item__thumbnail"src="https://'+Chinese[index].Img+'">'+
              '</div>'+
              '<div class="center">'+
              ' <span class="list-item__title">'+Chinese[index].Title+'</span><span class="list-item__subtitle">'+Chinese[index].Skill+'</span>'+
              '</div>'+
              '</ons-list-item>';
              
            return ons.createElement(listitem);
          },
          countItems: function () {
            // Return the number of items here.
            return Chinese.length;
          },
          calculateItemHeight: function (index) {
            // Optional: return the height of the item at position `index`.
            // This can enhance calculations and allow better scrolling.
            return 0;
          },
          destroyItem: function (index, element) {
            // Remove event listeners, etc. here to avoid memory leaks.
          }
        };})()
      });
    
      const updateSearch = (msg)=>{
        // ons.notification.alert("search :"+msg);
        tempList = new Array;
        var count = 0;
        for(i=0;i<Chinese.length;i++){
          if(Chinese[i].Title.indexOf(msg)!=-1)
            tempList[count++] = Chinese[i]
        }
        var list = document.getElementById('recipelist');
        list.delegate = {
          createItemContent: function (index) {
            // Return a DOM element here.
            // return ons.createElement( '<ons-list-item id="listitem'+index+'">Item'+index+'</ons-list-item>');
            // console.log(tempList[index].Img);
            var listitem = '<ons-list-item id="recipe'+index+'"onclick="showDetail(tempList['+index+'],\'detail.html\')">'+
              '<div class="left"> '+
              '<img class="list-item__thumbnail"src="https://'+tempList[index].Img+'">'+
              '</div>'+
              '<div class="center">'+
              ' <span class="list-item__title">'+tempList[index].Title+'</span><span class="list-item__subtitle">'+tempList[index].Skill+'</span>'+
              '</div>'+
              '</ons-list-item>';
              
            return ons.createElement(listitem);
          },
          countItems: function () {
            // Return the number of items here.
            return tempList.length;
          },
          calculateItemHeight: function (index) {
            // Optional: return the height of the item at position `index`.
            // This can enhance calculations and allow better scrolling.
            return 0;
          },
          destroyItem: function (index, element) {
            // Remove event listeners, etc. here to avoid memory leaks.
          }
        };
      }
  </script>

  <div>
    <h1 style="text-align: center;">Shopping Page</h1>
  </div>

</ons-page>
